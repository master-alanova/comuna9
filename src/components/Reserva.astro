---

---

<section id="reserva" class="reserva">
    <div class="container">
        <div class="reserva-content">
            <h2>Reservá tu Mesa</h2>
            <p class="reserva-intro">
                Para confirmar tu lugar en nuestra mesa y garantizar la frescura
                de nuestros productos de estación, solicitamos una seña mínima.
            </p>

            <form class="reserva-form" id="reservaForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="nombre">Nombre y Apellido</label>
                        <input type="text" id="nombre" name="nombre" required />
                    </div>

                    <div class="form-group">
                        <label for="whatsapp">WhatsApp</label>
                        <input
                            type="tel"
                            id="whatsapp"
                            name="whatsapp"
                            placeholder="+54 9 11 XXXX-XXXX"
                            required
                        />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="fecha">Fecha</label>
                        <input type="date" id="fecha" name="fecha" required />
                    </div>

                    <div class="form-group">
                        <label for="comensales">Comensales</label>
                        <select id="comensales" name="comensales" required>
                            <option value="">Seleccionar</option>
                            <option value="1">1 persona</option>
                            <option value="2">2 personas</option>
                            <option value="3">3 personas</option>
                            <option value="4">4 personas</option>
                            <option value="5">5 personas</option>
                            <option value="6">6+ personas</option>
                        </select>
                    </div>
                </div>

                <div class="payment-section">
                    <h3>Opciones de Pago de Seña</h3>
                    <!-- TODO: Implementar MercadoPago     -->
                    <div class="payment-buttons">
                        <button
                            type="button"
                            class="btn btn-primary"
                            id="mercadoPagoBtn"
                        >
                            Pagar con MercadoPago
                        </button>
                        <button type="button" class="btn" id="transferBtn">
                            Transferencia Bancaria
                        </button>
                    </div>

                    <div
                        class="transfer-info"
                        id="transferInfo"
                        style="display: none;"
                    >
                        <p><strong>Alias:</strong> comuna9.ar</p>
                        <p><strong>CVU:</strong> 0000003100080811785172</p>
                        <p><strong>Titular:</strong> Pelandra Bros S.A.</p>
                        <button
                            type="button"
                            class="btn btn-primary"
                            id="whatsappBtn"
                        >
                            Enviar Comprobante por WhatsApp
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>

<script>
    // Google Tag Manager Event
    const mercadoPagoBtn = document.getElementById("mercadoPagoBtn");
    mercadoPagoBtn?.addEventListener("click", () => {
        if (typeof window !== "undefined" && (window as any).dataLayer) {
            (window as any).dataLayer.push({
                event: "generate_reservation_lead",
                payment_method: "mercadopago",
            });
        }
        // Redirect to MercadoPago (would need actual integration)
        alert("Redirigiendo a MercadoPago...");
    });

    // Show transfer info
    const transferBtn = document.getElementById("transferBtn");
    const transferInfo = document.getElementById("transferInfo");
    transferBtn?.addEventListener("click", () => {
        if (transferInfo) {
            transferInfo.style.display = "block";
        }
    });

    // WhatsApp send
    const whatsappBtn = document.getElementById("whatsappBtn");
    whatsappBtn?.addEventListener("click", () => {
        const form = document.getElementById("reservaForm") as HTMLFormElement;
        const nombre = (form.elements.namedItem("nombre") as HTMLInputElement)
            .value;
        const fecha = (form.elements.namedItem("fecha") as HTMLInputElement)
            .value;
        const comensales = (
            form.elements.namedItem("comensales") as HTMLSelectElement
        ).value;

        const mensaje = `Hola! Soy ${nombre}. Quiero reservar mesa para ${comensales} personas el ${fecha}. Adjunto comprobante de seña.`;
        const whatsappUrl = `https://wa.me/5491112345678?text=${encodeURIComponent(mensaje)}`;
        window.open(whatsappUrl, "_blank");
    });
</script>

<style>
    .reserva {
        background: linear-gradient(
            135deg,
            var(--color-bg-dark) 0%,
            var(--color-accent) 100%
        );
        color: var(--color-text-light);
        padding: var(--spacing-xxl) 0;
    }

    .reserva-content {
        max-width: 700px;
        margin: 0 auto;
        text-align: center;
    }

    .reserva h2 {
        font-size: clamp(2.5rem, 4vw, 4rem);
        font-weight: 300;
        margin-bottom: var(--spacing-md);
        color: var(--color-secondary);
    }

    .reserva-intro {
        font-size: 1.125rem;
        margin-bottom: var(--spacing-lg);
        opacity: 0.9;
        line-height: 1.8;
    }

    .reserva-form {
        background-color: rgba(255, 255, 255, 0.05);
        padding: var(--spacing-lg);
        border-radius: 4px;
        backdrop-filter: blur(10px);
        text-align: left;
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-group label {
        font-size: 0.875rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 0.5rem;
        color: var(--color-secondary);
    }

    .form-group input,
    .form-group select {
        padding: 0.875rem 1rem;
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: var(--border-radius);
        color: var(--color-text-light);
        font-size: 1rem;
        transition: all var(--transition-fast);
    }

    .form-group input:focus,
    .form-group select:focus {
        outline: none;
        border-color: var(--color-secondary);
        background-color: rgba(255, 255, 255, 0.15);
    }

    .payment-section {
        margin-top: var(--spacing-lg);
        padding-top: var(--spacing-lg);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .payment-section h3 {
        font-size: 1.25rem;
        font-weight: 400;
        margin-bottom: var(--spacing-md);
        color: var(--color-secondary);
    }

    .payment-buttons {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .payment-buttons .btn {
        flex: 1;
        border-color: var(--color-secondary);
        color: var(--color-secondary);
    }

    .payment-buttons .btn-primary {
        background-color: var(--color-secondary);
        color: var(--color-primary);
    }

    .transfer-info {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 1.5rem;
        border-radius: var(--border-radius);
        margin-top: 1.5rem;
    }

    .transfer-info p {
        margin-bottom: 0.75rem;
        font-size: 1rem;
    }

    .transfer-info strong {
        color: var(--color-secondary);
    }

    #whatsappBtn {
        margin-top: 1rem;
        width: 100%;
    }

    @media (max-width: 768px) {
        .reserva {
            padding: var(--spacing-lg) 0;
        }

        .form-row {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .payment-buttons {
            flex-direction: column;
        }
    }
</style>
